<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>YTP Video Editor</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/timeline.css">
    <link rel="stylesheet" href="styles/editor.css">
    <link rel="stylesheet" href="styles/mobile.css">
</head>
<body>
    <div class="editor-container">
        <!-- Header -->
        <header class="editor-header">
            <h1>YTP Video Editor</h1>
            <div class="header-controls">
                <button id="undoBtn" class="btn btn-icon" title="Undo (Ctrl+Z)" disabled>‚Ü∂</button>
                <button id="redoBtn" class="btn btn-icon" title="Redo (Ctrl+Shift+Z)" disabled>‚Ü∑</button>
                <span class="separator"></span>
                <button type="button" id="mobileMediaPanelBtn" class="btn btn-icon mobile-only" title="Media library" aria-label="Media library">üìÅ</button>
                <button type="button" id="mobilePropertiesPanelBtn" class="btn btn-icon mobile-only" title="Properties" aria-label="Properties">‚öôÔ∏è</button>
                <button type="button" id="mobileProjectBtn" class="btn btn-icon mobile-only" title="Project" aria-label="Project">‚ò∞</button>
                <button id="newProjectBtn" class="btn btn-secondary">New Project</button>
                <button id="saveBtn" class="btn btn-secondary">Save Project</button>
                <button id="exportBtn" class="btn btn-primary" title="Export video" aria-label="Export video" disabled>Export Video</button>
            </div>
        </header>

        <div id="mobileOverlay" class="mobile-overlay" hidden></div>

        <!-- Main content area -->
        <div class="editor-main">
            <!-- Left sidebar - Media panel -->
            <aside class="media-panel">
                <h2>Media Library</h2>
                <div class="media-upload">
                    <button id="uploadBtn" class="btn btn-secondary">
                        <span>üìÅ Upload Media</span>
                    </button>
                    <input type="file" id="fileInput" accept="video/*,audio/*" multiple hidden>
                </div>
                <div id="mediaList" class="media-list"></div>
            </aside>

            <!-- Center - Preview and Timeline -->
            <main class="editor-center">
                <!-- Preview area -->
                <section class="preview-section">
                    <div class="preview-container">
                        <canvas id="previewCanvas"></canvas>
                    </div>
                    <div class="preview-controls">
                        <button id="playBtn" class="btn btn-icon">‚ñ∂</button>
                        <button id="pauseBtn" class="btn btn-icon" style="display:none;">‚è∏</button>
                        <span id="timeDisplay" class="time-display">00:00.00</span>
                        <input type="range" id="volumeSlider" min="0" max="100" value="100" class="volume-slider">
                        <span class="volume-label">üîä</span>
                    </div>
                </section>

                <!-- Timeline area -->
                <section class="timeline-section">
                    <div class="timeline-toolbar">
                        <button id="addTrackBtn" class="btn btn-sm">+ Track</button>
                        <button type="button" id="splitBtn" class="btn btn-sm mobile-only" title="Split clip at playhead">Split</button>
                        <button type="button" id="deleteBtn" class="btn btn-sm mobile-only" title="Delete selection">Delete</button>
                        <span class="separator"></span>
                        <span class="zoom-label">Zoom:</span>
                        <button id="zoomOutBtn" class="btn btn-icon btn-sm">-</button>
                        <span id="zoomLevel" class="zoom-level">100%</span>
                        <button id="zoomInBtn" class="btn btn-icon btn-sm">+</button>
                    </div>
                    <div id="timelineContainer" class="timeline-container"></div>
                    <input type="range" id="timelineScroll" class="timeline-scroll" min="0" max="0" value="0" step="1"
                           aria-label="Timeline scroll" hidden>
                </section>
            </main>

            <!-- Right sidebar - Properties panel -->
            <aside class="properties-panel">
                <div id="propertiesContent" class="properties-content">
                    <p class="empty-message">Select a clip to edit properties</p>
                </div>
            </aside>
        </div>

        <!-- Status bar -->
        <footer class="status-bar">
            <span id="statusText">Ready</span>
            <span id="fps">60 FPS</span>
        </footer>
        <div id="exportCommandBar" class="export-command-bar" hidden>
            <span class="export-command-label">FFmpeg</span>
            <input id="exportCommandInput" class="export-command-input" readonly>
            <button id="exportCommandCopyBtn" class="btn btn-secondary btn-sm">Copy</button>
            <button id="exportCommandCloseBtn" class="btn btn-icon btn-sm" title="Close">√ó</button>
        </div>
    </div>

    <!-- Keyboard shortcuts help modal -->
    <div id="helpModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Keyboard Shortcuts</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <table class="shortcuts-table">
                    <tr><td><kbd>Space</kbd></td><td>Play/Pause</td></tr>
                    <tr><td><kbd>J</kbd></td><td>Jump backward 1s</td></tr>
                    <tr><td><kbd>L</kbd></td><td>Jump forward 1s</td></tr>
                    <tr><td><kbd>S</kbd></td><td>Split clip at playhead</td></tr>
                    <tr><td><kbd>Delete</kbd></td><td>Delete selected clip</td></tr>
                    <tr><td><kbd>R</kbd></td><td>Reverse clip</td></tr>
                    <tr><td><kbd>[</kbd> / <kbd>]</kbd></td><td>Speed down/up</td></tr>
                    <tr><td><kbd>Ctrl+Z</kbd></td><td>Undo</td></tr>
                    <tr><td><kbd>Ctrl+Shift+Z</kbd></td><td>Redo</td></tr>
                    <tr><td><kbd>+</kbd> / <kbd>-</kbd></td><td>Zoom in/out</td></tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Project modal -->
    <div id="projectModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Project</h3>
                <button class="close-btn" id="projectModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="projectModalMessage" class="modal-message"></p>
                <div class="modal-actions">
                    <button id="projectNewBtn" class="btn btn-secondary">New Project</button>
                    <button id="projectLoadBtn" class="btn btn-primary">Load Saved</button>
                    <button id="projectSaveBtn" class="btn btn-secondary">Save Project</button>
                    <button id="projectImportBtn" class="btn btn-secondary">Import JSON</button>
                    <button id="projectCancelBtn" class="btn btn-secondary">Cancel</button>
                </div>
                <input type="file" id="projectImportInput" accept="application/json,.json" hidden
                       aria-label="Project JSON file">
            </div>
        </div>
    </div>

    <!-- Save modal -->
    <div id="saveModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Save Project</h3>
                <button class="close-btn" id="saveModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="saveModalMessage" class="modal-message"></p>
                <div class="modal-actions">
                    <button id="saveLocalBtn" class="btn btn-primary">Save to Browser</button>
                    <button id="saveExportBtn" class="btn btn-secondary">Export JSON</button>
                    <button id="saveCancelBtn" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Export modal -->
    <div id="exportModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export</h3>
                <button class="close-btn" id="exportModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p id="exportModalMessage" class="modal-message"></p>
                <div class="modal-actions">
                    <button id="exportReencodeBtn" class="btn btn-primary">Re-encode</button>
                    <button id="exportLosslessBtn" class="btn btn-secondary">Lossless Copy</button>
                    <button id="exportCancelBtn" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>
</html>
